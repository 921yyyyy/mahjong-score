<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ€„ é«˜ç²¾åº¦è§£æ (Professional Edition)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <style>
        body { background-color: #0f172a; color: #f1f5f9; font-family: 'Helvetica Neue', Arial, sans-serif; }
        .canvas-container { position: relative; width: 100%; border-radius: 12px; overflow: hidden; background: #000; border: 2px solid #334155; }
        #previewCanvas { width: 100%; display: block; }
        input[type="number"] { -moz-appearance: textfield; background: transparent; font-weight: bold; outline: none; }
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        input[type="range"] { height: 10px; border-radius: 5px; background: #334155; accent-color: #f97316; width: 100%; cursor: pointer; }
        
        /* æœ¬æ ¼ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .score-grid { display: grid; grid-template-columns: 30px repeat(4, 1fr); gap: 1px; background-color: #cbd5e1; border: 2px solid #64748b; }
        .grid-header { background-color: #475569; color: white; padding: 4px; text-align: center; font-size: 10px; font-weight: 900; }
        .grid-cell { background-color: white; padding: 2px; display: flex; gap: 1px; }
        .cell-num { background-color: #f8fafc; display: flex; items-center; justify-center; font-size: 10px; color: #94a3b8; font-weight: bold; }
        .input-plus { background-color: #eff6ff !important; color: #1d4ed8; } /* ãƒ—ãƒ©ã‚¹ã¯é’ç³» */
        .input-minus { background-color: #fff1f2 !important; color: #be123c; } /* ãƒã‚¤ãƒŠã‚¹ã¯èµ¤ç³» */
    </style>
</head>
<body class="p-2 sm:p-4 pb-24">
    <div class="max-w-xl mx-auto space-y-4">
        <header class="p-3 bg-slate-800 rounded-2xl border border-slate-700 shadow-xl flex items-center justify-center gap-3">
            <span class="text-2xl">ğŸ€„</span>
            <h1 class="text-lg font-black text-orange-400 tracking-widest">MAHJONG SCANNER PRO</h1>
        </header>
<div class="flex justify-end px-1">
    <a href="history.html" class="text-[10px] font-bold bg-slate-800 text-orange-400 px-4 py-2 rounded-full border border-orange-500/30 transition-active active:scale-95">
        ğŸ“Š å±¥æ­´ã‚’è¡¨ç¤º
    </a>
</div>
        <div class="p-4 bg-slate-800 rounded-2xl shadow-lg space-y-4 border border-slate-700">
            <input type="file" id="imageInput" accept="image/*" class="hidden">
            <button onclick="document.getElementById('imageInput').click()" class="w-full py-4 bg-indigo-500 hover:bg-indigo-600 text-white font-bold rounded-xl shadow-lg transition-transform active:scale-95">
                ğŸ“ å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
            </button>
            <div class="grid grid-cols-2 gap-3">
                <button id="rotateBtn" class="py-3 bg-slate-700 text-white font-bold rounded-xl border border-slate-600">â†º è§’åº¦èª¿æ•´</button>
                <button id="analyzeBtn" class="py-3 bg-orange-500 text-white font-bold rounded-xl shadow-lg shadow-orange-500/20">ğŸ¯ ã‚¹ã‚­ãƒ£ãƒ³é–‹å§‹</button>
            </div>
        </div>

        <div class="p-5 bg-slate-900 rounded-2xl border border-orange-500/30 space-y-5">
            <div class="grid grid-cols-2 gap-x-6 gap-y-4">
                <div class="space-y-1">
                    <div class="flex justify-between items-center"><span class="text-[10px] text-slate-400 font-bold">å·¦å³(X)</span><span id="valX" class="text-[10px] text-orange-400">0</span></div>
                    <input type="range" id="adjustX" min="-500" max="800" value="0">
                </div>
                <div class="space-y-1">
                    <div class="flex justify-between items-center"><span class="text-[10px] text-slate-400 font-bold">ä¸Šä¸‹(Y)</span><span id="valY" class="text-[10px] text-orange-400">0</span></div>
                    <input type="range" id="adjustY" min="-800" max="800" value="0">
                </div>
                <div class="space-y-1">
                    <div class="flex justify-between items-center"><span class="text-[10px] text-slate-400 font-bold text-orange-300">â˜…æ¨ªå¹…(W)</span><span id="valW" class="text-[10px] text-orange-400">1.0</span></div>
                    <input type="range" id="adjustW" min="0.5" max="3.5" step="0.01" value="1.0">
                </div>
                <div class="space-y-1">
                    <div class="flex justify-between items-center"><span class="text-[10px] text-slate-400 font-bold">é«˜ã•(H)</span><span id="valH" class="text-[10px] text-orange-400">1.0</span></div>
                    <input type="range" id="adjustH" min="0.5" max="2.5" step="0.01" value="1.0">
                </div>
            </div>
        </div>

        <div class="canvas-container shadow-2xl shadow-black/50">
            <canvas id="previewCanvas"></canvas>
        </div>

        <div id="debugLog" class="h-24 p-3 bg-black/80 text-emerald-400 text-[10px] font-mono overflow-y-auto border border-emerald-900/30 rounded-xl backdrop-blur-sm">
            -- STANDBY --
        </div>

        <div class="rounded-xl overflow-hidden shadow-2xl border-2 border-slate-700">
            <div class="score-grid">
                <div class="grid-header flex items-center justify-center">å›</div>
                <div class="grid-header">Aã•ã‚“<br><span class="text-[8px] opacity-70">ï¼‹ / ï¼</span></div>
                <div class="grid-header">Bã•ã‚“<br><span class="text-[8px] opacity-70">ï¼‹ / ï¼</span></div>
                <div class="grid-header">Cã•ã‚“<br><span class="text-[8px] opacity-70">ï¼‹ / ï¼</span></div>
                <div class="grid-header">Dã•ã‚“<br><span class="text-[8px] opacity-70">ï¼‹ / ï¼</span></div>
                
                <div id="gridBody" class="contents text-slate-800"></div>

                <div class="bg-slate-200 py-3 text-[10px] font-black flex items-center justify-center border-t border-slate-400">è¨ˆ</div>
                <div id="totalA" class="bg-slate-50 py-3 text-center font-black text-sm border-t border-slate-400">0</div>
                <div id="totalB" class="bg-slate-50 py-3 text-center font-black text-sm border-t border-slate-400">0</div>
                <div id="totalC" class="bg-slate-50 py-3 text-center font-black text-sm border-t border-slate-400">0</div>
                <div id="totalD" class="bg-slate-50 py-3 text-center font-black text-sm border-t border-slate-400">0</div>
            </div>
        </div>

                <button id="saveData" class="w-full py-5 bg-emerald-600 hover:bg-emerald-700 text-white font-black rounded-2xl shadow-xl transition-all active:scale-95">
            ğŸ’¾ çµæœã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ã«ä¿å­˜
        </button>
    </div>

    <div id="cloudModal" style="display:none;" class="fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-slate-800 w-full max-w-sm p-6 rounded-3xl border border-slate-700 shadow-2xl space-y-6">
            <h2 class="text-center font-bold text-orange-400">å¯¾å±€è€…ã‚’æ±ºå®š</h2>
            <div id="playerInputs" class="space-y-4"></div>
            <div class="flex gap-3 pt-2">
                <button onclick="document.getElementById('cloudModal').style.display='none'" class="flex-1 py-3 bg-slate-700 rounded-xl font-bold text-xs">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                <button id="dbSubmitBtn" class="flex-1 py-3 bg-emerald-500 rounded-xl font-bold text-xs">DBã«ä¿å­˜</button>
            </div>
        </div>
    </div>
    <datalist id="playerHistory"></datalist>

       <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <script src="app.js"></script>
<datalist id="playerHistory"></datalist>
    <script src="navbar.js"></script>

    </body>
</html>

