<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>麻雀DXスコアラー</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src='https://unpkg.com/tesseract.js@v4.0.1/dist/tesseract.min.js'></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100 pb-20">
    <div class="max-w-2xl mx-auto bg-white shadow-xl min-h-screen">
        <div class="bg-green-800 p-4 text-white">
            <h1 class="text-lg font-bold mb-3">🀄 高精度グリッド解析モード</h1>
            <div class="space-y-3">
                <input type="file" id="imageInput" accept="image/*" class="text-xs w-full bg-green-700 p-2 rounded">
                <div class="flex gap-2">
                    <button onclick="rotateImage()" class="flex-1 bg-blue-600 py-2 rounded text-xs font-bold">↻ 90度回転</button>
                    <button onclick="startAnalysis()" id="analyzeBtn" class="flex-1 bg-yellow-500 py-2 rounded text-xs text-black font-bold">🎯 解析開始</button>
                </div>
            </div>
            <div class="mt-3 flex justify-center bg-black rounded overflow-hidden relative">
                <canvas id="previewCanvas" class="max-w-full h-auto"></canvas>
            </div>
        </div>

        <div id="scoreGridHeader" class="sticky top-0 z-10"></div>
        <div id="scoreRows" class="p-1 space-y-1"></div>

        <div class="p-4 bg-yellow-50 border-t sticky bottom-0 z-20">
            <div id="totals" class="grid grid-cols-4 gap-2 mb-4 text-center font-bold font-mono"></div>
            <button onclick="saveSheet()" class="w-full bg-green-700 text-white py-3 rounded-xl font-bold">データを保存</button>
        </div>
    </div>
    <script src="app.js"></script>
</body>
</html>
